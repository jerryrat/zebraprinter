# 监控无法检测数据库变化 - 解决方案

## 问题原因
**数据库路径未配置！**

您的配置文件中数据库路径为空：
```json
"DatabasePath": ""
```

虽然自动监控已启用，但由于数据库路径未设置，监控实际上并未启动。

## 解决方案

### 方案一：通过程序界面配置（推荐）

1. **启动 ZebraPrinterMonitor.exe**

2. **在程序界面找到"数据库配置"区域**

3. **点击"浏览"按钮**
   - 选择您的Access数据库文件（.mdb 或 .accdb）
   - 例如：`C:\data\TestRecord.mdb`

4. **点击"测试连接"按钮**
   - 确认数据库可以正常访问
   - 看到"连接成功"提示

5. **配置自动保存**
   - 程序会自动保存配置到 appsettings.json
   - 监控会在2秒后自动启动

6. **确认监控状态**
   - 查看程序界面中的"监控状态"
   - 应该显示"监控运行中"（绿色）

### 方案二：直接编辑配置文件

1. **关闭程序**

2. **编辑 appsettings.json 文件**
   ```json
   {
     "Database": {
       "DatabasePath": "C:\\完整路径\\到你的数据库.mdb",
       "TableName": "TestRecord",
       "MonitorField": "TR_ID",
       "PollInterval": 1000
     }
   }
   ```

3. **重启程序**
   - 监控会自动启动
   - 查看日志确认连接成功

## 验证监控是否正常工作

### 检查方法1：查看程序日志
在程序界面的日志区域应该看到：
```
[时间] 数据库连接成功 - Microsoft.ACE.OLEDB.16.0 (64位)
[时间] 开始监控数据库，轮询间隔: 1000ms
[时间] 监控已启动
[时间] 首次监控完成，最新记录ID: XXX, 序列号: XXX
```

### 检查方法2：测试新记录检测
1. **在数据库中手动添加一条新记录**
2. **等待1-2秒**
3. **程序应该显示："检测到新记录: 序列号 (TR_ID: XXX)"**
4. **记录列表会自动刷新**

## 常见问题

### Q1: 显示"数据库连接失败"
**解决：**
- 确认数据库文件路径正确
- 确认数据库文件未被其他程序锁定
- 检查是否安装了正确的Access数据库引擎

### Q2: 监控启动但检测不到新记录
**检查：**
- 监控字段设置是否正确（默认：TR_ID）
- 数据库表名是否正确（默认：TestRecord）
- 新记录的TR_ID字段是否有值

### Q3: 如何确认监控间隔
**查看配置：**
```json
"PollInterval": 1000  // 1000毫秒 = 1秒检查一次
```

## 快速诊断工具

运行 `quick_debug.bat` 可以快速检查当前配置状态。

## 联系支持

如果按照上述步骤仍无法解决问题，请提供：
1. 完整的程序日志
2. 数据库文件路径
3. 数据库表结构（字段名称）
4. 具体错误信息 