# 太阳能电池测试打印监控系统 v1.1.22

## 新增功能：数据库兼容性控制

### 问题背景
在之前的版本中，系统会自动在数据库表中添加 `TR_Print` 列来记录打印次数。但这导致其他程序无法正常使用该数据库，因为其他程序可能不认识这个新增的列。

### 解决方案
v1.1.22 版本新增了 **"启用打印次数统计"** 功能开关，彻底解决数据库兼容性问题。

### 新增功能详解

#### 1. 打印次数控制开关
- **位置**：主界面 → 数据监控 → 监控控制组
- **选项名称**：启用打印次数统计
- **默认状态**：❌ 未勾选（保持数据库兼容性）

#### 2. 功能状态说明

##### 🔴 未勾选状态（默认，推荐）
- ✅ **完全保持数据库兼容性**
- ✅ 不会添加 `TR_Print` 列到数据库
- ✅ 不会更新任何打印次数记录
- ✅ 其他程序可以正常使用数据库
- ✅ 所有打印功能正常工作
- ❌ 界面显示的打印次数始终为 0

##### 🟢 勾选状态
- ✅ 启用完整的打印次数统计功能
- ✅ 自动添加 `TR_Print` 列（如不存在）
- ✅ 记录每次打印操作
- ✅ 界面显示真实的打印次数
- ❌ 可能影响其他程序使用数据库

### 使用建议

#### 🔹 推荐方案（默认）
**保持"启用打印次数统计"未勾选**
- 适用于与其他程序共享数据库的环境
- 完全避免数据库兼容性问题
- 仍可正常使用所有打印功能

#### 🔹 高级用案
**勾选"启用打印次数统计"**
- 适用于独立使用本系统的环境
- 需要详细的打印统计功能
- 确保其他程序不会被影响

### 配置保存
- 设置会自动保存到配置文件
- 程序重启后会恢复上次的设置状态

### 技术说明
- 该功能通过配置项 `Database.EnablePrintCount` 控制
- 修改后即时生效，无需重启程序
- 在禁用状态下，所有数据库修改操作被安全跳过

---

## 更新历史

### v1.1.22 (当前版本)
- ✅ 新增打印次数控制开关
- ✅ 解决数据库兼容性问题
- ✅ 默认保持向后兼容
- ✅ 优化用户体验

### v1.1.21
- ✅ 修复图标显示问题
- ✅ 更新公司名称为 ooitech

---

**重要提醒**：为了保持与其他程序的兼容性，建议保持默认设置（不勾选打印次数统计）。 